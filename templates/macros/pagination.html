{# Reusable pagination widget for list pages.
   Call with: render_pagination(pagination, 'endpoint_name', extra_args={'key': 'val'})
#}
{% macro render_pagination(pagination, endpoint, extra_args={}) %}
{% if pagination.pages > 1 %}
<nav aria-label="Page navigation" class="mt-3">
  <ul class="pagination justify-content-center mb-1">
    <li class="page-item {{ 'disabled' if not pagination.has_prev }}">
      <a class="page-link"
         href="{{ url_for(endpoint, page=pagination.prev_num, **extra_args) }}">&laquo; Prev</a>
    </li>
    {% for p in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
      {% if p %}
        <li class="page-item {{ 'active' if p == pagination.page }}">
          <a class="page-link" href="{{ url_for(endpoint, page=p, **extra_args) }}">{{ p }}</a>
        </li>
      {% else %}
        <li class="page-item disabled"><span class="page-link">&hellip;</span></li>
      {% endif %}
    {% endfor %}
    <li class="page-item {{ 'disabled' if not pagination.has_next }}">
      <a class="page-link"
         href="{{ url_for(endpoint, page=pagination.next_num, **extra_args) }}">Next &raquo;</a>
    </li>
  </ul>
  <p class="text-center text-muted small mb-0">
    Page {{ pagination.page }} of {{ pagination.pages }}
    ({{ pagination.total }} total records)
  </p>
</nav>
{% endif %}
{% endmacro %}
