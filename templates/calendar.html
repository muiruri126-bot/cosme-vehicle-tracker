{% extends "base.html" %}
{% block title %}Calendar â€“ Vehicle Request Tracker{% endblock %}

{% block head %}
<!-- FullCalendar CDN -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
<style>
  #calendar { max-width: 1100px; margin: 0 auto; }
  .fc-event { cursor: pointer; }
</style>
{% endblock %}

{% block content %}
<h2 class="mb-4"><i class="bi bi-calendar3"></i> Booking Calendar</h2>

<div class="mb-3">
  <span class="badge bg-warning text-dark">&nbsp;</span> Pending &nbsp;
  <span class="badge bg-success">&nbsp;</span> Approved
</div>

<div id="calendar"></div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,listWeek'
      },
      events: '{{ url_for("api_bookings") }}',
      eventClick: function (info) {
        info.jsEvent.preventDefault();
        if (info.event.url) {
          window.location.href = info.event.url;
        }
      },
      height: 'auto',
      navLinks: true,
      nowIndicator: true
    });
    calendar.render();
  });
</script>
{% endblock %}
